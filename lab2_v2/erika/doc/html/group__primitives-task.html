<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Erika3 Manual: Task Primitives</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="erika3.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Erika3 Manual
   &#160;<span id="projectnumber">GH55</span>
   </div>
   <div id="projectbrief">a tiny RTOS for small microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__primitives-task.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Task Primitives</div>  </div>
</div><!--header-->
<div class="contents">

<p>The Task Primitives are related to the start and stop of Tasks.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga4e7c7014b29fafc9f04982c4b97512c5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__primitives-task.html#ga4e7c7014b29fafc9f04982c4b97512c5">INVALID_TASK</a>&#160;&#160;&#160;((<a class="el" href="group__primitives-task.html#ga9733da8629f4d0984967785419b15d4a">TaskType</a>)-1)</td></tr>
<tr class="memdesc:ga4e7c7014b29fafc9f04982c4b97512c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the invalid task value.  <a href="group__primitives-task.html#ga4e7c7014b29fafc9f04982c4b97512c5">More...</a><br /></td></tr>
<tr class="separator:ga4e7c7014b29fafc9f04982c4b97512c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6ec57cab346cf26d69aa233e351607ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__primitives-task.html#ga6ec57cab346cf26d69aa233e351607ef">OSEE_ISR2_PRIO_BIT</a>&#160;&#160;&#160;( (<a class="el" href="group__primitives-task.html#ga2fbf8607316afe2fe7d402a8f6e00008">TaskPrio</a>)1U &lt;&lt; ( (sizeof(<a class="el" href="group__primitives-task.html#ga2fbf8607316afe2fe7d402a8f6e00008">TaskPrio</a>)*((size_t)CHAR_BIT)) - ((size_t)1U) ) )</td></tr>
<tr class="memdesc:ga6ec57cab346cf26d69aa233e351607ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Most significant bit of a priority.  <a href="group__primitives-task.html#ga6ec57cab346cf26d69aa233e351607ef">More...</a><br /></td></tr>
<tr class="separator:ga6ec57cab346cf26d69aa233e351607ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga396a5877823a792dc34d5ab99a9d20a8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__primitives-task.html#ga396a5877823a792dc34d5ab99a9d20a8">OSEE_ISR_ALL_PRIO</a>&#160;&#160;&#160;((<a class="el" href="group__primitives-task.html#ga2fbf8607316afe2fe7d402a8f6e00008">TaskPrio</a>)-1)</td></tr>
<tr class="memdesc:ga396a5877823a792dc34d5ab99a9d20a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit mask for all priority bits.  <a href="group__primitives-task.html#ga396a5877823a792dc34d5ab99a9d20a8">More...</a><br /></td></tr>
<tr class="separator:ga396a5877823a792dc34d5ab99a9d20a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga14ccd8f4ce95fa715c864835bce984ad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__primitives-task.html#ga14ccd8f4ce95fa715c864835bce984ad">DeclareTask</a>(TaskToBeDeclared)&#160;&#160;&#160;extern <a class="el" href="ee__compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(void, <a class="el" href="ee__compiler__cfg_8h.html#a919da7d9b61966c3af796ab42e618bef">OS_CODE</a>) Func##TaskToBeDeclared ( void )</td></tr>
<tr class="memdesc:ga14ccd8f4ce95fa715c864835bce984ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task Declaration.  <a href="group__primitives-task.html#ga14ccd8f4ce95fa715c864835bce984ad">More...</a><br /></td></tr>
<tr class="separator:ga14ccd8f4ce95fa715c864835bce984ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab6f61d38161c8ec10230950d7476f77c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__primitives-task.html#gab6f61d38161c8ec10230950d7476f77c">TASK</a>(TaskToBeDefined)&#160;&#160;&#160;<a class="el" href="ee__compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(void, <a class="el" href="ee__compiler__cfg_8h.html#a919da7d9b61966c3af796ab42e618bef">OS_CODE</a>) Func##TaskToBeDefined ( void )</td></tr>
<tr class="memdesc:gab6f61d38161c8ec10230950d7476f77c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task Definition.  <a href="group__primitives-task.html#gab6f61d38161c8ec10230950d7476f77c">More...</a><br /></td></tr>
<tr class="separator:gab6f61d38161c8ec10230950d7476f77c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga9733da8629f4d0984967785419b15d4a"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="ee__api__types_8h.html#a9e73ce321dc7375392297601f51e9c72">OSEE_TASK_ID_TYPE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__primitives-task.html#ga9733da8629f4d0984967785419b15d4a">TaskType</a></td></tr>
<tr class="memdesc:ga9733da8629f4d0984967785419b15d4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type used for Task IDs.  <a href="group__primitives-task.html#ga9733da8629f4d0984967785419b15d4a">More...</a><br /></td></tr>
<tr class="separator:ga9733da8629f4d0984967785419b15d4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga01fe8c0087d9df2949a2a8a5617f72bf"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="group__primitives-task.html#ga9733da8629f4d0984967785419b15d4a">TaskType</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__primitives-task.html#ga01fe8c0087d9df2949a2a8a5617f72bf">TaskRefType</a></td></tr>
<tr class="memdesc:ga01fe8c0087d9df2949a2a8a5617f72bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a pointer to a TaskType.  <a href="group__primitives-task.html#ga01fe8c0087d9df2949a2a8a5617f72bf">More...</a><br /></td></tr>
<tr class="separator:ga01fe8c0087d9df2949a2a8a5617f72bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2fbf8607316afe2fe7d402a8f6e00008"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="ee__api__types_8h.html#aaaef40f9b276933d5afbfb578db8d124">OSEE_TASK_PRIO_TYPE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__primitives-task.html#ga2fbf8607316afe2fe7d402a8f6e00008">TaskPrio</a></td></tr>
<tr class="memdesc:ga2fbf8607316afe2fe7d402a8f6e00008"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type storing task priorities.  <a href="group__primitives-task.html#ga2fbf8607316afe2fe7d402a8f6e00008">More...</a><br /></td></tr>
<tr class="separator:ga2fbf8607316afe2fe7d402a8f6e00008"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7d48c2f208a17a0fa4faed331e0586f0"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="ee__api__types_8h.html#a1abc43b358b88d0f5adcb1bc0b70f5df">OsEE_task_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__primitives-task.html#ga7d48c2f208a17a0fa4faed331e0586f0">TaskStateType</a></td></tr>
<tr class="memdesc:ga7d48c2f208a17a0fa4faed331e0586f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task state type.  <a href="group__primitives-task.html#ga7d48c2f208a17a0fa4faed331e0586f0">More...</a><br /></td></tr>
<tr class="separator:ga7d48c2f208a17a0fa4faed331e0586f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9d7cac8cf0b035942325538ba01ba7c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ee__api__types_8h.html#a79bf54a17078edb124b553c51129396a">StatusType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__primitives-task.html#ga9d7cac8cf0b035942325538ba01ba7c6">ActivateTask</a> (<a class="el" href="group__primitives-task.html#ga9733da8629f4d0984967785419b15d4a">TaskType</a> TaskID)</td></tr>
<tr class="memdesc:ga9d7cac8cf0b035942325538ba01ba7c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This primitive activates a task TaskID.  <a href="group__primitives-task.html#ga9d7cac8cf0b035942325538ba01ba7c6">More...</a><br /></td></tr>
<tr class="separator:ga9d7cac8cf0b035942325538ba01ba7c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89ce30708e79048336a17c62bb47e1c7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ee__api__types_8h.html#a79bf54a17078edb124b553c51129396a">StatusType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__primitives-task.html#ga89ce30708e79048336a17c62bb47e1c7">ChainTask</a> (<a class="el" href="group__primitives-task.html#ga9733da8629f4d0984967785419b15d4a">TaskType</a> TaskID)</td></tr>
<tr class="memdesc:ga89ce30708e79048336a17c62bb47e1c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminates the calling task, and atomically activates the TaskID passed as parameter.  <a href="group__primitives-task.html#ga89ce30708e79048336a17c62bb47e1c7">More...</a><br /></td></tr>
<tr class="separator:ga89ce30708e79048336a17c62bb47e1c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga83c21cbaa47c5ac5cd56b7ba6490b8ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ee__api__types_8h.html#a79bf54a17078edb124b553c51129396a">StatusType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__primitives-task.html#ga83c21cbaa47c5ac5cd56b7ba6490b8ca">TerminateTask</a> (void)</td></tr>
<tr class="memdesc:ga83c21cbaa47c5ac5cd56b7ba6490b8ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminates the calling task.  <a href="group__primitives-task.html#ga83c21cbaa47c5ac5cd56b7ba6490b8ca">More...</a><br /></td></tr>
<tr class="separator:ga83c21cbaa47c5ac5cd56b7ba6490b8ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6b5f9ab90c9fc8697f14e5741167ef4f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ee__api__types_8h.html#a79bf54a17078edb124b553c51129396a">StatusType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__primitives-task.html#ga6b5f9ab90c9fc8697f14e5741167ef4f">GetTaskID</a> (<a class="el" href="group__primitives-task.html#ga01fe8c0087d9df2949a2a8a5617f72bf">TaskRefType</a> TaskID)</td></tr>
<tr class="memdesc:ga6b5f9ab90c9fc8697f14e5741167ef4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the Task ID of the running task.  <a href="group__primitives-task.html#ga6b5f9ab90c9fc8697f14e5741167ef4f">More...</a><br /></td></tr>
<tr class="separator:ga6b5f9ab90c9fc8697f14e5741167ef4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga885470501db458f64bb820f1a82593bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ee__api__types_8h.html#a79bf54a17078edb124b553c51129396a">StatusType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__primitives-task.html#ga885470501db458f64bb820f1a82593bb">GetTaskState</a> (<a class="el" href="group__primitives-task.html#ga9733da8629f4d0984967785419b15d4a">TaskType</a> TaskID, <a class="el" href="ee__api__types_8h.html#a1abc43b358b88d0f5adcb1bc0b70f5df">TaskStateRefType</a> State)</td></tr>
<tr class="memdesc:ga885470501db458f64bb820f1a82593bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This primitive returns the state of a given task.  <a href="group__primitives-task.html#ga885470501db458f64bb820f1a82593bb">More...</a><br /></td></tr>
<tr class="separator:ga885470501db458f64bb820f1a82593bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4c3463247a1aa258800f903b0a52a9d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ee__api__types_8h.html#a79bf54a17078edb124b553c51129396a">StatusType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__primitives-task.html#gab4c3463247a1aa258800f903b0a52a9d">Schedule</a> (void)</td></tr>
<tr class="memdesc:gab4c3463247a1aa258800f903b0a52a9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A rescheduling point typically used in non-preemptive tasks.  <a href="group__primitives-task.html#gab4c3463247a1aa258800f903b0a52a9d">More...</a><br /></td></tr>
<tr class="separator:gab4c3463247a1aa258800f903b0a52a9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Independently of the task type all kernel primitives that may cause rescheduling may be called in any Tasks' sub-functions.</p>
<p>Tasks are activated using the primitives <a class="el" href="group__primitives-task.html#ga9d7cac8cf0b035942325538ba01ba7c6" title="This primitive activates a task TaskID.">ActivateTask()</a> or <a class="el" href="group__primitives-task.html#ga89ce30708e79048336a17c62bb47e1c7" title="Terminates the calling task, and atomically activates the TaskID passed as parameter.">ChainTask()</a>. Activating a task means that the activated task, may be selected for scheduling, and may execute one Task Instance. A task activation while a task is already waiting its execution or while being the running task has an effect that depends on how many pending activations the particular Conformance Class can store. BCC1 and ECC1 does not store pending activations, whereas BCC2 and ECC2 can store pending activations if the task has been properly configured in the OIL Configuration file.</p>
<p>Tasks <em>must end</em> with a call either to <a class="el" href="group__primitives-task.html#ga83c21cbaa47c5ac5cd56b7ba6490b8ca" title="Terminates the calling task.">TerminateTask()</a> or <a class="el" href="group__primitives-task.html#ga89ce30708e79048336a17c62bb47e1c7" title="Terminates the calling task, and atomically activates the TaskID passed as parameter.">ChainTask()</a>. Terminating a task without one of these two primitives leads to indefinite results. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga14ccd8f4ce95fa715c864835bce984ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga14ccd8f4ce95fa715c864835bce984ad">&#9670;&nbsp;</a></span>DeclareTask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DeclareTask</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">TaskToBeDeclared</td><td>)</td>
          <td>&#160;&#160;&#160;extern <a class="el" href="ee__compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(void, <a class="el" href="ee__compiler__cfg_8h.html#a919da7d9b61966c3af796ab42e618bef">OS_CODE</a>) Func##TaskToBeDeclared ( void )</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Declares a task. It is equivalent of an externa declaration of a task function defined with the <em><a class="el" href="group__primitives-task.html#gab6f61d38161c8ec10230950d7476f77c" title="Task Definition.">TASK()</a></em> macro.</p>
<p>This declaration is currently not mandatory because task identifiers are all declared within the code generated by RT-Druid.</p>
<p>Reference: OSEK OS - ISO 17356-3 - 13.3.2.1</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">TaskToBeDeclared</td><td>The task to be declared. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a id="ga4e7c7014b29fafc9f04982c4b97512c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4e7c7014b29fafc9f04982c4b97512c5">&#9670;&nbsp;</a></span>INVALID_TASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVALID_TASK&#160;&#160;&#160;((<a class="el" href="group__primitives-task.html#ga9733da8629f4d0984967785419b15d4a">TaskType</a>)-1)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the invalid task value. No task can have this task ID. <a class="el" href="group__primitives-task.html#ga6b5f9ab90c9fc8697f14e5741167ef4f" title="Returns the Task ID of the running task.">GetTaskID()</a> executed in the background task (or idle hook) always provides INVALID_TASK. </p>

</div>
</div>
<a id="ga6ec57cab346cf26d69aa233e351607ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6ec57cab346cf26d69aa233e351607ef">&#9670;&nbsp;</a></span>OSEE_ISR2_PRIO_BIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSEE_ISR2_PRIO_BIT&#160;&#160;&#160;( (<a class="el" href="group__primitives-task.html#ga2fbf8607316afe2fe7d402a8f6e00008">TaskPrio</a>)1U &lt;&lt; ( (sizeof(<a class="el" href="group__primitives-task.html#ga2fbf8607316afe2fe7d402a8f6e00008">TaskPrio</a>)*((size_t)CHAR_BIT)) - ((size_t)1U) ) )</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the most significant bit of a priority Note that a priority that has this bit to 1 is a "virtual priority" of an ISR2. </p>

</div>
</div>
<a id="ga396a5877823a792dc34d5ab99a9d20a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga396a5877823a792dc34d5ab99a9d20a8">&#9670;&nbsp;</a></span>OSEE_ISR_ALL_PRIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSEE_ISR_ALL_PRIO&#160;&#160;&#160;((<a class="el" href="group__primitives-task.html#ga2fbf8607316afe2fe7d402a8f6e00008">TaskPrio</a>)-1)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Bit mask for all priority bits. </p>

</div>
</div>
<a id="gab6f61d38161c8ec10230950d7476f77c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab6f61d38161c8ec10230950d7476f77c">&#9670;&nbsp;</a></span>TASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TASK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">TaskToBeDefined</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="ee__compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(void, <a class="el" href="ee__compiler__cfg_8h.html#a919da7d9b61966c3af796ab42e618bef">OS_CODE</a>) Func##TaskToBeDefined ( void )</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This macro is used when defining the body of a task.</p>
<p>Reference: OSEK OS - ISO 17356-3 - 13.3.5</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">TaskToBeDefined</td><td>This is the task keyword used also in the OIL file. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga2fbf8607316afe2fe7d402a8f6e00008"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2fbf8607316afe2fe7d402a8f6e00008">&#9670;&nbsp;</a></span>TaskPrio</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="ee__api__types_8h.html#aaaef40f9b276933d5afbfb578db8d124">OSEE_TASK_PRIO_TYPE</a> <a class="el" href="group__primitives-task.html#ga2fbf8607316afe2fe7d402a8f6e00008">TaskPrio</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This type is used to store the priority of both Tasks and ISR2s (please remember that ISR2 are treated like tasks inside ERIKA3).</p>
<p>TaskPrio is an integer number (usually n bits=8).</p>
<p>Higher values for higher priorities.</p>
<p>The same variable maps two types of priorities, in two different value ranges:</p><ul>
<li>The task priority</li>
<li>The ISR2 ''virtual'' priority.</li>
</ul>
<p>The ISR2 virtual priority maps the interrupt controller prioriries on top of the Task priorities. This is done by allocating the two kind of priorities into two non-overlapping ranges.</p>
<p>Choosen the dimension 'n' in bit of the type, the priority space is partitioned in the following way:</p>
<ul>
<li>0 Idle (Task) Priority,</li>
<li>1 .. 2^(n-1) - 1 Tasks priorities. (value for n=8, 1..127)</li>
<li>2^(n-1) .. 2^n-2 ISR2 virtual priorities (typically the hardware priority range is smaller than the size of this range) (value for n=8, 128..254)</li>
<li>2^n - 1 Special value used to not reenable interrupts (used for internal interrupts when we want prevent preemption, like for system timer or for Scheduling Inter Core Interrupts). (value for n=8, 255)</li>
</ul>
<p>ISR2 virtual priorities are mapped to hardware priorities by a HAL porting function in the following way:</p>
<p>Virtual priority 2^(n-1) == lowest_hardware priority Virtual priority 2^(n-1) + 1 == second_lowest_harware_priority ... and so on. </p>

</div>
</div>
<a id="ga01fe8c0087d9df2949a2a8a5617f72bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga01fe8c0087d9df2949a2a8a5617f72bf">&#9670;&nbsp;</a></span>TaskRefType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="group__primitives-task.html#ga9733da8629f4d0984967785419b15d4a">TaskType</a>* <a class="el" href="group__primitives-task.html#ga01fe8c0087d9df2949a2a8a5617f72bf">TaskRefType</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This type is a pointer to Task IDs, used as parameter of a primitive. </p>

</div>
</div>
<a id="ga7d48c2f208a17a0fa4faed331e0586f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7d48c2f208a17a0fa4faed331e0586f0">&#9670;&nbsp;</a></span>TaskStateType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="ee__api__types_8h.html#a1abc43b358b88d0f5adcb1bc0b70f5df">OsEE_task_status</a> <a class="el" href="ee__api__types_8h.html#a1abc43b358b88d0f5adcb1bc0b70f5df">TaskStateType</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the TaskState type, which is used to store the Task states. TaskState is returned also by <a class="el" href="group__primitives-task.html#ga885470501db458f64bb820f1a82593bb" title="This primitive returns the state of a given task.">GetTaskState()</a>, with one of the following values: SUSPENDED, READY, RUNNING, WAITING. The complete list of states are defined in the values of OsEE_task_status. </p>

</div>
</div>
<a id="ga9733da8629f4d0984967785419b15d4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9733da8629f4d0984967785419b15d4a">&#9670;&nbsp;</a></span>TaskType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="ee__api__types_8h.html#a9e73ce321dc7375392297601f51e9c72">OSEE_TASK_ID_TYPE</a> <a class="el" href="group__primitives-task.html#ga9733da8629f4d0984967785419b15d4a">TaskType</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Type used for Task IDs. Typically the size of a word on the microcontroller. It is a positive number (except the invalid task which is -1). The Task IDs are consistent and do not change in case of multicore configurations. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga9d7cac8cf0b035942325538ba01ba7c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9d7cac8cf0b035942325538ba01ba7c6">&#9670;&nbsp;</a></span>ActivateTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ee__api__types_8h.html#a79bf54a17078edb124b553c51129396a">StatusType</a> ActivateTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__primitives-task.html#ga9733da8629f4d0984967785419b15d4a">TaskType</a>&#160;</td>
          <td class="paramname"><em>TaskID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This primitive activates a task TaskID, putting it in the READY state, or in the RUNNING state if the scheduler finds that the activated task should become the running task.</p>
<p>Once activated, the task will run for an instance, starting from its first instruction. For the BCC2 and ECC2 Conformance classes, pending activations can be stored if the task has been configured with a number of activations greater than 1 within the OIL configuration file.</p>
<p>The function can be called from the Background task (typically, the main() function).</p>
<p>Conformance Classes: BCC1, BCC2, ECC1, ECC2</p>
<p>Reference: OSEK OS - ISO 17356-3 - 13.3.3.1</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">TaskID</td><td>Task to be activated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns a StatusType<ul>
<li>E_OK: No error.</li>
<li>E_OS_LIMIT: Too many pending activations of TaskID.</li>
<li>E_OS_ID: (Extended) TaskID is invalid. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga89ce30708e79048336a17c62bb47e1c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga89ce30708e79048336a17c62bb47e1c7">&#9670;&nbsp;</a></span>ChainTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ee__api__types_8h.html#a79bf54a17078edb124b553c51129396a">StatusType</a> ChainTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__primitives-task.html#ga9733da8629f4d0984967785419b15d4a">TaskType</a>&#160;</td>
          <td class="paramname"><em>TaskID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This primitive is similar to TerminateTask, with the differences listed below.</p>
<p>After the calling task is terminated, TaskID is activated again.</p>
<p>If TaskID is the calling task ID, then the calling task is terminated, the Internal Resource is unlocked, and then the calling task is put again in the ready queue to be scheduled. The Internal Resource will be locked again when the task will be again selected for scheduling.</p>
<p>When called successfully, ChainTask does not return to the caller. In case of error the primitive returns, and the returned error value can be evaluated by the application.</p>
<p>When an extended task is transferred from suspended state into ready state all its events are cleared.</p>
<p>Conformance Classes: BCC1, BCC2, ECC1, ECC2</p>
<p>Reference: OSEK OS - ISO 17356-3 - 13.3.3.3</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">TaskID</td><td>The task to activate</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns a StatusType<ul>
<li>No return: If the call is successful.</li>
<li>E_OS_LIMIT: Too many task activations of TaskID. The Task activation in this case is ignored.</li>
<li>E_OS_ID: (Extended) Task TaskID is invalid.</li>
<li>E_OS_RESOURCE: (Extended) Calling task still occupies resources.</li>
<li>E_OS_CALLEVEL: (Extended) Call at interrupt level. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga6b5f9ab90c9fc8697f14e5741167ef4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6b5f9ab90c9fc8697f14e5741167ef4f">&#9670;&nbsp;</a></span>GetTaskID()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ee__api__types_8h.html#a79bf54a17078edb124b553c51129396a">StatusType</a> GetTaskID </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__primitives-task.html#ga01fe8c0087d9df2949a2a8a5617f72bf">TaskRefType</a>&#160;</td>
          <td class="paramname"><em>TaskID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The function returns the Task ID of the running task. If no task is running, INVALID_TASK is returned.</p>
<p>Conformance Classes: BCC1, BCC2, ECC1, ECC2</p>
<p>Reference: OSEK OS - ISO 17356-3 - 13.3.3.5</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">TaskID</td><td>The Task ID of the running task</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function always returns a StatusType of value E_OK. </dd></dl>

</div>
</div>
<a id="ga885470501db458f64bb820f1a82593bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga885470501db458f64bb820f1a82593bb">&#9670;&nbsp;</a></span>GetTaskState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ee__api__types_8h.html#a79bf54a17078edb124b553c51129396a">StatusType</a> GetTaskState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__primitives-task.html#ga9733da8629f4d0984967785419b15d4a">TaskType</a>&#160;</td>
          <td class="paramname"><em>TaskID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ee__api__types_8h.html#a1abc43b358b88d0f5adcb1bc0b70f5df">TaskStateRefType</a>&#160;</td>
          <td class="paramname"><em>State</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This primitive returns the state of a given task. Possible states are listed in the definition of the TaskStateType.</p>
<p>If the task TaskID supports pending activation, and the task has been activated more than once, the results refer to the state of its oldest activation.</p>
<p>Conformance Classes: BCC1, BCC2, ECC1, ECC2</p>
<p>Reference: OSEK OS - ISO 17356-3 - 13.3.3.6</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">TaskID</td><td>The task for which we want to read the state. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">State</td><td>The task state of TaskID. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns a StatusType.<ul>
<li>E_OK: (Extended) No error.</li>
<li>E_OS_ID: (Extended) Task TaskID is invalid. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="gab4c3463247a1aa258800f903b0a52a9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab4c3463247a1aa258800f903b0a52a9d">&#9670;&nbsp;</a></span>Schedule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ee__api__types_8h.html#a79bf54a17078edb124b553c51129396a">StatusType</a> Schedule </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This primitive can be used as a rescheduling point for tasks that have Internal Resources and for non preemptive tasks (Non preemptive tasks can be seen as tasks with an Internal Resource with the highest priority ceiling available assigned.).</p>
<p>When this primitive is called, the task releases its Internal Resource, and checks if there are higher priority tasks that have to preempt (In that case, a preemption is implemented). When the primitive returns, the task will reacquire its internal resource.</p>
<p>The primitive does nothing if the calling task has no internal resource assigned.</p>
<p>Conformance Classes: BCC1, BCC2, ECC1, ECC2</p>
<p>Reference: OSEK OS - ISO 17356-3 - 13.3.3.4</p>
<dl class="section return"><dt>Returns</dt><dd>The function returns a StatusType.<ul>
<li>E_OK: No error.<ul>
<li>E_OS_CALLEVEL: (Extended) The primitive was called at interrupt level.</li>
</ul>
</li>
<li>E_OS_RESOURCE: (Extended) The calling task occupies resources. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga83c21cbaa47c5ac5cd56b7ba6490b8ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga83c21cbaa47c5ac5cd56b7ba6490b8ca">&#9670;&nbsp;</a></span>TerminateTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ee__api__types_8h.html#a79bf54a17078edb124b553c51129396a">StatusType</a> TerminateTask </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This primitive terminates the calling task. The function can be called from any function nesting: the stack space used by the task is also freed. The calling task should not have any Resource locked when this primitive is called (apart an Internal Resource that is automatically released with this call).</p>
<p>After the call, the calling task is set in the SUSPENDED state, and it can be reactivated again using ActivateTask, ChainTask, or using Alarm notifications.</p>
<p>All the tasks must terminate with a call to TerminateTask or ChainTask. If not present, TerminateTask will be called automatically.</p>
<p>With Standard Status, the primitive never returns. With Extended Status, the primitive may return in case of errors.</p>
<p>Conformance Classes: BCC1, BCC2, ECC1, ECC2</p>
<p>Reference: OSEK OS - ISO 17356-3 - 13.3.3.2</p>
<dl class="section return"><dt>Returns</dt><dd>The function returns a StatusType<ul>
<li>No return: If the call is successful.</li>
<li>E_OS_RESOURCE: (Extended) The task still occupies resources.</li>
<li>E_OS_CALLEVEL: (Extended) The function was called at interrupt level. </li>
</ul>
</dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
